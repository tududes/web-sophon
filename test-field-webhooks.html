<!DOCTYPE html>
<html>

<head>
    <title>WebSophon Field Webhook Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
        }

        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 30px;
            color: #1976d2;
        }

        .steps {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 4px;
            margin-top: 30px;
        }

        .steps h2 {
            margin-top: 0;
            color: #666;
        }

        .steps ol {
            line-height: 1.8;
        }

        .webhook-example {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .test-data {
            margin-top: 30px;
            padding: 20px;
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>WebSophon Field Webhook Test</h1>

        <div class="info">
            <strong>‚ÑπÔ∏è Test Page for Field-Level Webhooks</strong><br>
            This page helps you test the field-level webhook functionality where each field can have its own webhook
            that fires when the field evaluates to TRUE.
        </div>

        <div class="test-data">
            <h3>Sample Field Configurations:</h3>
            <p>Configure your fields in the WebSophon extension with:</p>

            <h4>Field 1: "Long Buy Signal"</h4>
            <ul>
                <li><strong>Description:</strong> Look for strong buy signals</li>
                <li><strong>Webhook Enabled:</strong> ‚úÖ</li>
                <li><strong>Webhook URL:</strong> <code>https://webhook.site/your-unique-id-1</code></li>
                <li><strong>Custom Payload:</strong></li>
            </ul>
            <div class="webhook-example">{"action": "buy", "symbol": "TEST", "amount": 100}</div>

            <h4>Field 2: "Short Sell Signal"</h4>
            <ul>
                <li><strong>Description:</strong> Look for sell indicators</li>
                <li><strong>Webhook Enabled:</strong> ‚úÖ</li>
                <li><strong>Webhook URL:</strong> <code>https://webhook.site/your-unique-id-2</code></li>
                <li><strong>Custom Payload:</strong> <em>(empty for GET request)</em></li>
            </ul>
        </div>

        <div class="steps">
            <h2>üìã Testing Steps:</h2>
            <ol>
                <li><strong>Set up webhook endpoints:</strong>
                    <ul>
                        <li>Go to <a href="https://webhook.site" target="_blank">webhook.site</a></li>
                        <li>Copy your unique URL for each field webhook</li>
                    </ul>
                </li>

                <li><strong>Configure fields in WebSophon:</strong>
                    <ul>
                        <li>Open the WebSophon extension popup</li>
                        <li>Add fields with descriptions that will evaluate to TRUE</li>
                        <li>Enable webhook for each field</li>
                        <li>Enter the webhook URL</li>
                        <li>Optionally add custom JSON payload</li>
                    </ul>
                </li>

                <li><strong>Configure main webhook:</strong>
                    <ul>
                        <li>Set your main webhook URL that evaluates fields</li>
                        <li>Make sure it returns TRUE for at least one field</li>
                    </ul>
                </li>

                <li><strong>Capture screenshot:</strong>
                    <ul>
                        <li>Click "Capture Now" in the extension</li>
                        <li>Main webhook will be called first</li>
                        <li>For each field that evaluates to TRUE, its webhook will fire</li>
                    </ul>
                </li>

                <li><strong>Check results:</strong>
                    <ul>
                        <li>Look at the History section in the extension</li>
                        <li>Expand the event to see all webhook calls</li>
                        <li>You should see separate sections for each field webhook</li>
                        <li>Check webhook.site to confirm requests were received</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="test-data">
            <h3>üîç What to Look For:</h3>
            <ul>
                <li>In the History section, each event should show:
                    <ul>
                        <li>Main webhook request/response</li>
                        <li>Separate "Field Webhook: [Field Name]" sections</li>
                        <li>Each field webhook shows its request (GET/POST) and response</li>
                        <li>Success/failure status for each webhook</li>
                    </ul>
                </li>
                <li>Field webhooks only fire when:
                    <ul>
                        <li>The field evaluates to TRUE</li>
                        <li>The field has webhook enabled</li>
                        <li>The field has a webhook URL configured</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div style="margin-top: 40px; padding: 20px; background: #fff3cd; border-radius: 4px;">
            <strong>üí° Tips:</strong>
            <ul style="margin: 10px 0;">
                <li>Use webhook.site for easy testing without setting up a server</li>
                <li>Test both GET (no payload) and POST (with payload) webhooks</li>
                <li>Check the browser console for debug logs</li>
                <li>Field names are sanitized (spaces ‚Üí underscores, lowercase)</li>
            </ul>
        </div>
    </div>
</body>

</html>