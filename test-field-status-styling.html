<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Field Status Message Styling Test</title>
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body data-theme="dark">
    <div class="container">
        <div class="header-section">
            <div class="header-content">
                <h1>📋 Field Status Message Test</h1>
            </div>
        </div>

        <div class="section">
            <h2>🎨 Status Message Styling Test</h2>
            <p>Testing all status message types in the fields tab context:</p>

            <!-- Test the actual field-status element like in the fields tab -->
            <div class="tab-panel active" id="fields-tab-demo">
                <div class="preset-controls">
                    <div class="preset-dropdown-group">
                        <select id="preset-selector">
                            <option value="">Select a preset...</option>
                            <option value="test">Test Preset</option>
                        </select>
                    </div>
                    <div class="preset-buttons-group">
                        <button class="small-button">💾 Save</button>
                        <button class="small-button danger">🗑️ Delete</button>
                    </div>
                </div>

                <div class="fields-container">
                    <div class="field-item">
                        <div class="field-header">
                            <input type="text" class="field-name-input" value="Test Field" readonly>
                            <div class="field-last-result">
                                <span class="result-text">No results yet</span>
                            </div>
                            <button class="remove-field-btn">✕</button>
                        </div>
                        <textarea class="field-description"
                            readonly>This is a test field for demonstration purposes.</textarea>
                    </div>
                </div>

                <button class="add-field-button">
                    ➕ Add Field
                </button>

                <!-- This is the field status element that should show styled toast messages -->
                <div id="field-status" class="status-message"></div>
            </div>
        </div>

        <div class="section">
            <h2>🧪 Status Message Tests</h2>
            <div style="display: grid; gap: var(--space-md);">
                <button onclick="showTestMessage('success')" class="small-button">Show Success Message</button>
                <button onclick="showTestMessage('info')" class="small-button">Show Info Message</button>
                <button onclick="showTestMessage('error')" class="small-button">Show Error Message</button>
                <button onclick="showTestMessage('warning')" class="small-button">Show Warning Message</button>
            </div>
        </div>

        <div class="section">
            <h2>📝 Status Message Examples</h2>
            <p>Here's how each status message type should look:</p>

            <div style="display: flex; flex-direction: column; gap: var(--space-md);">
                <div class="status-message success">
                    <strong>✅ Success:</strong> Field added successfully
                </div>

                <div class="status-message info">
                    <strong>ℹ️ Info:</strong> Tell Chase removed
                </div>

                <div class="status-message error">
                    <strong>❌ Error:</strong> Failed to save field configuration
                </div>

                <div class="status-message warning">
                    <strong>⚠️ Warning:</strong> Field name contains invalid characters
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🔍 Debug Information</h2>
            <div id="debug-info"
                style="background-color: var(--bg-secondary); padding: var(--space-md); border-radius: var(--radius-md); font-family: monospace; font-size: var(--text-xs);">
                <strong>Field Status Element:</strong><br>
                ID: field-status<br>
                Current Class: <span id="current-class">status-message</span><br>
                Current Text: <span id="current-text">(empty)</span><br>
                Computed Styles: <span id="computed-styles">(checking...)</span>
            </div>
        </div>
    </div>

    <script>
        const fieldStatusElement = document.getElementById('field-status');

        function showTestMessage(type) {
            const messages = {
                success: 'Field added successfully',
                info: 'Tell Chase removed',
                error: 'Failed to save field configuration',
                warning: 'Field name contains invalid characters'
            };

            const message = messages[type];

            // Simulate the exact same function as in popup-main.js
            if (fieldStatusElement) {
                fieldStatusElement.textContent = message;
                fieldStatusElement.className = `status-message ${type}`;

                // Update debug info
                updateDebugInfo();

                setTimeout(() => {
                    fieldStatusElement.className = 'status-message';
                    fieldStatusElement.textContent = '';
                    updateDebugInfo();
                }, 3000);
            }
        }

        function updateDebugInfo() {
            document.getElementById('current-class').textContent = fieldStatusElement.className;
            document.getElementById('current-text').textContent = fieldStatusElement.textContent || '(empty)';

            // Get computed styles
            const computedStyle = window.getComputedStyle(fieldStatusElement);
            const styleInfo = `bg: ${computedStyle.backgroundColor}, color: ${computedStyle.color}, border: ${computedStyle.border}`;
            document.getElementById('computed-styles').textContent = styleInfo;
        }

        // Initialize debug info
        updateDebugInfo();

        // Test the messages on load
        setTimeout(() => showTestMessage('info'), 1000);

        console.log('Field Status Element:', fieldStatusElement);
        console.log('Element classes:', fieldStatusElement.className);
        console.log('Computed styles:', window.getComputedStyle(fieldStatusElement));
    </script>
</body>

</html>