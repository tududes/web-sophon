<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSophon UI Fixes Test</title>
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
    <div class="container">
        <div class="header-section">
            <div class="header-content">
                <h1>üõ†Ô∏è WebSophon UI Fixes Test</h1>
            </div>
        </div>

        <div class="section">
            <h2>‚úÖ 1. Checkbox Horizontal Alignment Fix</h2>
            <p>Checkboxes should now be properly aligned horizontally with their labels:</p>

            <div class="checkbox-label">
                <input type="checkbox" id="test1" checked>
                <span>Enable automatic capture (should be horizontal)</span>
            </div>

            <div class="checkbox-label">
                <input type="checkbox" id="test2">
                <span>Use full page screenshots instead of viewport only</span>
            </div>

            <div class="checkbox-label">
                <input type="checkbox" id="test3" checked>
                <span>Refresh page before screenshot with delay option</span>
            </div>
        </div>

        <div class="section">
            <h2>üéõÔ∏è 2. Toggle Switch Background Visibility Fix</h2>
            <p>Toggle switches should have visible backgrounds even when disabled/unchecked:</p>

            <div class="domain-consent-group">
                <div class="toggle-switch">
                    <input type="checkbox" id="toggle1" checked>
                    <label for="toggle1" class="slider"></label>
                </div>
                <label for="toggle1" class="consent-label">
                    Enabled toggle (should have colored background)
                </label>
            </div>

            <div class="domain-consent-group">
                <div class="toggle-switch">
                    <input type="checkbox" id="toggle2">
                    <label for="toggle2" class="slider"></label>
                </div>
                <label for="toggle2" class="consent-label">
                    Disabled toggle (should have visible gray background with border)
                </label>
            </div>
        </div>

        <div class="section">
            <h2>üìã 3. History Entry Visual Separation & Caret Indicators</h2>
            <p>History entries should have clear visual separation and caret indicators showing they're expandable:</p>

            <div class="history-container">
                <div class="history-item">
                    <div class="history-header">
                        <div class="history-domain">x.com</div>
                        <div class="history-time">2 minutes ago</div>
                        <!-- Caret indicator added via CSS ::after -->
                    </div>
                    <div class="history-status success">Success</div>
                    <div class="history-fields">
                        <div class="history-field">
                            <div class="history-field-indicator true"></div>
                            <span>Ad Present: TRUE</span>
                        </div>
                    </div>
                </div>

                <div class="history-item expanded">
                    <div class="history-header">
                        <div class="history-domain">facebook.com</div>
                        <div class="history-time">5 minutes ago</div>
                        <!-- Caret rotated when expanded -->
                    </div>
                    <div class="history-status success">Success</div>
                    <div class="history-fields">
                        <div class="history-field">
                            <div class="history-field-indicator false"></div>
                            <span>Login Required: FALSE</span>
                        </div>
                    </div>
                    <div class="history-details">
                        <div class="detail-item">
                            <strong>Request Data:</strong>
                            <div class="json-display">
                                Full LLM request payload captured here!
                            </div>
                        </div>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-header">
                        <div class="history-domain">google.com</div>
                        <div class="history-time">10 minutes ago</div>
                    </div>
                    <div class="history-status error">Error</div>
                    <div class="history-no-fields">No field results</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîç 4. LLM Request Capture Enhancement</h2>
            <p>‚úÖ <strong>Fixed in services/LLMService.js:</strong></p>
            <ul style="margin-left: 20px; color: var(--text-secondary);">
                <li>Now captures the complete original LLM request payload</li>
                <li>Includes full system prompt with field criteria</li>
                <li>Contains all OpenAI API parameters (model, temperature, max_tokens)</li>
                <li>Stores the complete message structure with image data</li>
                <li>Added new <code>updateEventRequestData()</code> method to EventService</li>
                <li>Full request payload stored in <code>event.request.llmRequestPayload</code></li>
            </ul>

            <div class="status-message success">
                <strong>All UI fixes implemented successfully!</strong><br>
                The extension now provides better visual feedback and captures complete LLM request data for debugging
                and analysis.
            </div>
        </div>
    </div>
</body>

</html>